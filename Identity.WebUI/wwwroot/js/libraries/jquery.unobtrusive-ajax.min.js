!function(t){var a="unobtrusiveAjaxClick",e="unobtrusiveAjaxClickTarget";function r(t,a){for(var e=window,r=(t||"").split(".");e&&r.length;)e=e[r.shift()];return"function"==typeof e?e:(a.push(t),Function.constructor.apply(null,a))}function n(t){return"GET"===t||"POST"===t}function i(a,e){if(!(i=a.getAttribute("data-ajax-confirm"))||window.confirm(i)){u=t(a.getAttribute("data-ajax-loading")),d=parseInt(a.getAttribute("data-ajax-loading-duration"),10)||0,t.extend(e,{type:a.getAttribute("data-ajax-method")||void 0,url:a.getAttribute("data-ajax-url")||void 0,cache:"true"===(a.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(t){var e,i,c;return i=t,n(c=o)||i.setRequestHeader("X-HTTP-Method-Override",c),e=r(a.getAttribute("data-ajax-begin"),["xhr"]).apply(a,arguments),!1!==e&&u.show(d),e},complete:function(){u.hide(d),r(a.getAttribute("data-ajax-complete"),["xhr","status"]).apply(a,arguments)},success:function(e,n,i){var u,o,d,c;u=a,o=e,-1===(d=i.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(c=(u.getAttribute("data-ajax-mode")||"").toUpperCase(),t(u.getAttribute("data-ajax-update")).each(function(a,e){switch(c){case"BEFORE":t(e).prepend(o);break;case"AFTER":t(e).append(o);break;case"REPLACE-WITH":t(e).replaceWith(o);break;default:t(e).html(o)}})),r(a.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(a,arguments)},error:function(){r(a.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(a,arguments)}}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),n(o=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:o}));var i,u,o,d,c=t(a);if(c.is("form")&&"multipart/form-data"==c.attr("enctype")){var s=new FormData;t.each(e.data,function(t,a){s.append(a.name,a.value)}),t("input[type=file]",c).each(function(){var a=this;t.each(a.files,function(t,e){s.append(a.name,e)})}),t.extend(e,{processData:!1,contentType:!1,data:s})}t.ajax(e)}}t(document).on("click","a[data-ajax=true]",function(t){t.preventDefault(),i(this,{url:this.href,type:"GET",data:[]})}),t(document).on("click","form[data-ajax=true] input[type=image]",function(e){var r=e.target.name,n=t(e.target),i=t(n.parents("form")[0]),u=n.offset();i.data(a,[{name:r+".x",value:Math.round(e.pageX-u.left)},{name:r+".y",value:Math.round(e.pageY-u.top)}]),setTimeout(function(){i.removeData(a)},0)}),t(document).on("click","form[data-ajax=true] :submit",function(r){var n=r.currentTarget.name,i=t(r.target),u=t(i.parents("form")[0]);u.data(a,n?[{name:n,value:r.currentTarget.value}]:[]),u.data(e,i),setTimeout(function(){u.removeData(a),u.removeData(e)},0)}),t(document).on("submit","form[data-ajax=true]",function(r){var n,u,o=t(this).data(a)||[],d=t(this).data(e),c=d&&(d.hasClass("cancel")||void 0!==d.attr("formnovalidate"));r.preventDefault(),(c||(n=this,!(u=t(n).data("unobtrusiveValidation"))||!u.validate||u.validate()))&&i(this,{url:this.action,type:this.method||"GET",data:o.concat(t(this).serializeArray())})})}(jQuery);